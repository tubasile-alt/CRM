Objetivo: Implementar notifica√ß√µes de nova mensagem no chat (som e/ou popup), sem atrapalhar outras telas. N√ÉO usar modal. Usar Toast discreto + Notification API quando aba estiver oculta.

1) FRONTEND (global):
Arquivo: static/js/main.js
- Implementar um ‚ÄúChatNotifier‚Äù global que roda junto com updateChatBadge().
- Guardar lastUnreadCount e lastNotifiedAt (em mem√≥ria e localStorage).
- Quando /api/chat/unread_count retornar count > lastUnreadCount:
  a) Mostrar toast (Bootstrap toast ou div fixo top-right) com auto-hide 4-6s, clic√°vel para window.location='/chat'.
  b) Se document.hidden === true OU location.pathname !== '/chat':
     - Disparar Notification API (se permitido) com t√≠tulo "Nova mensagem no chat" e corpo com preview se dispon√≠vel.
  c) Som: tocar um beep curto SOMENTE se o usu√°rio habilitou em um toggle (usar localStorage 'chatSoundEnabled' = true/false).
     - Criar pequeno bot√£o/√≠cone no topo (ou dentro do menu) ‚Äúüîî‚Äù para ligar/desligar som.
     - Se o navegador bloquear autoplay, ao clicar no toggle, tocar um som de teste e habilitar.
- Adicionar throttling: n√£o notificar se (Date.now()-lastNotifiedAt) < 4000ms.
- Atualizar lastUnreadCount ap√≥s notificar.

2) BACKEND (preview opcional mas recomendado):
Arquivo: app.py
- Criar endpoint GET /api/chat/latest_unread
  - Buscar o ChatMessage mais recente onde recipient_id = current_user.id e ainda n√£o tem MessageRead para esse usu√°rio.
  - Retornar {id, from_user_id, from_name, message (limit 80 chars), created_at iso}
  - Se n√£o houver, retornar {id:null}

3) FRONTEND (usar preview):
- No main.js, quando detectar aumento de unread_count:
  - chamar /api/chat/latest_unread para preencher toast/notification com "De: X ‚Äî mensagem..."
  - Se falhar, usar fallback gen√©rico "Nova mensagem no chat".

4) UI do Toast:
- Criar container fixo no canto superior direito (z-index alto, mas sem bloquear cliques fora).
- Empilhar toasts (max 3) e remover automaticamente.
- Clique no toast abre /chat.

5) Crit√©rios de aceite:
- Em qualquer p√°gina, ao chegar mensagem nova:
  - badge incrementa (j√° existe)
  - aparece toast discreto sem travar nada
  - se aba estiver em background, aparece notifica√ß√£o do sistema (se permitido)
  - som s√≥ toca se habilitado
- N√£o repetir notifica√ß√£o em loop a cada 5s sem mensagem nova.

Execute o patch e me devolva:
- lista de arquivos alterados
- trechos principais do c√≥digo adicionados
- como testar em 1 minuto (passo a passo)